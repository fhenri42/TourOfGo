{
  "name": "Bot-messenger-golang",
  "tagline": "",
  "body": "# README is not up to date (messing the config file part)!\r\n# Start coding your bot: Recast.AI + Facebook messenger\r\n\r\n* Here, you'll learn how to build a bot with Facebook Messenger and Recast.AI.\r\n\r\n## Requirements\r\n* Create an account on [Recast.AI](https://recast.ai/signup).\r\n* Create an account on [Facebook Developers](https://developers.facebook.com/). (same account than your personal Facebook account)\r\n\r\n## Set up your Recast.AI account\r\n\r\n##### Create your bot\r\n\r\n* Log into your [Recast.AI](https://recast.ai/login) account.\r\n* Create a new bot.\r\n\r\n##### Get your token\r\n\r\n* In your profile, click your bot.\r\n* In the tab-menu, click on the the little screw.\r\n* Here is the `request access token` you will need to configure your bot.\r\n\r\n## Create your facebook page\r\n* [Create your page](https://www.facebook.com/pages/create/?ref_type=logout_gear).\r\n\r\n [facebook]: https://raw.githubusercontent.com/RecastAI/bot-messenger/master/ressources/S%C3%A9lection_021.png \"Creating you page\"\r\n\r\n![alt text][facebook]\r\n* Choose the category of your page.\r\n* Fill out the Facebook requirements step by step.\r\n\r\n[facebook-set-up]: https://raw.githubusercontent.com/RecastAI/bot-messenger/master/ressources/S%C3%A9lection_022.png \"Steup of your page\"\r\n\r\n![alt text][facebook-set-up]\r\n\r\n## Set up your facebook account\r\n\r\n* Log on to your Facebook Developers account.\r\n* Create a new Facebook app.\r\n\r\n[facebook-first]: https://raw.githubusercontent.com/RecastAI/bot-messenger/master/ressources/S%C3%A9lection_028.png \"first page\"\r\n![alt text][facebook-first]\r\n\r\n\r\n* Get your app secret and ID [Dashboard](https://developers.facebook.com/apps/258158857911674/dashboard/).\r\n\r\n[facebook-app]: https://raw.githubusercontent.com/RecastAI/bot-messenger/master/ressources/S%C3%A9lection_025.png  \"Creating you page\"\r\n\r\n![alt text][facebook-app]\r\n\r\n* Get your page Token [Messanger](https://developers.facebook.com/apps/258158857911674/messenger/).\r\n\r\n[facebook-pageToken]: https://raw.githubusercontent.com/RecastAI/bot-messenger/master/ressources/S%C3%A9lection_026.png \"Creating you page\"\r\n\r\n![alt text][facebook-pageToken]\r\n\r\n## Start your bot in local\r\n```bash\r\ngit clone https://github.com/fhenri42/bot-Messenger-golang.git\r\n```\r\n\r\n#### Ngrok\r\n\r\n* Download the appropriate version of [Ngrok](https://ngrok.com/download).\r\n* Open a new tab in your terminal:\r\n```\r\n./ngrok http 5000\r\n```\r\n* Copy past the ``` https://*******ngrok.io``` you get, you will need it for the next step.\r\n* Leave your Ngrok serveur running.\r\n\r\n## Complete the config.go\r\n\r\n* Copy your Recast.AI `Recast.AI access token`\r\n* Copy your page access Token `Token of your Page`\r\n* Copy your validationToken `The token of your Webhook`\r\n\r\n* Incoming :)\r\n\r\n## Launching your Bot\r\n\r\n* make sure to have ngrok launched and the correct URL in you config file.\r\n\r\n```bash\r\n go run src/*.go\r\n```\r\n#### Config webhook\r\n\r\n* go back to the Facebook Developer page and add a new webhook.\r\n\r\n[webhook]: https://blog.recast.ai/wp-content/uploads/2016/09/S%C3%A9lection_020.png \"Webhook page\"\r\n\r\n![alt text][webhook]\r\n* Subscribe your page to the webhook you just created.\r\n\r\n[suscribe]: https://raw.githubusercontent.com/RecastAI/bot-messenger/master/ressources/S%C3%A9lection_024.png \"Subscribe page\"\r\n\r\n![alt text][suscribe]\r\n\r\n## Result\r\n\r\n[result]: https://raw.githubusercontent.com/RecastAI/bot-messenger/master/ressources/S%C3%A9lection_023.png\r\n\r\n![alt text][result]\r\n\r\n## Your bot\r\n```go\r\n\r\nfunc call_recast(msg string) string  {\r\n\tfmt.Printf(\"start call to recast\")\r\n\tclient := &http.Client{}\r\n\r\n\tform := url.Values{}\r\n\tform.Add(\"text\", msg)\r\n\treq, err := http.NewRequest(\"POST\",\"https://api.recast.ai/v2/converse\" ,strings.NewReader(form.Encode()))\r\n\tif err != nil {\r\n\t\tlog.Println(err)\r\n\t\treturn \"err\"\r\n\t}\r\n\treq.Header.Set(\"Authorization\", fmt.Sprintf(\"Token ADD_YOUR_TOKEN\"))\r\n\tresp, err := client.Do(req)\r\n\tif err != nil {\r\n\t\tlog.Println(err)\r\n\t\treturn \"err\"\r\n\t}\r\n\tbody, err := ioutil.ReadAll(resp.Body)\r\n\tif err != nil {\r\n\t\tlog.Println(err)\r\n\t\treturn \"err\"\r\n\t}\r\n\tlog.Println(\"\\n \\n \",string(body),\"\\n \\n\")\r\n\tvar rep RecastRep\r\n\terr = json.Unmarshal(body, &rep)\r\n\r\n\tif err != nil {\r\n\t\tlog.Println(err)\r\n\t\treturn \"err\"\r\n\t}\r\n\treturn rep.Results.Action.Reply\r\n\r\n}\r\n\r\nfunc  message_handler(data Data) {\r\n\tmessage := data.Entry[0].Messaging[0].Message.Text\r\n\trecipient := data.Entry[0].Messaging[0].Sender.ID\r\n\tmsg := call_recast(message)\r\n\tpost_facebook(msg, recipient)\r\n}\r\n```\r\n* Have fun coding your bot! :)\r\n\r\n## Author\r\n\r\nHenri Floren - Recast.AI\r\nhenri.floren@recast.ai\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}